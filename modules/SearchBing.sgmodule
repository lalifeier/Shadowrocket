#!name=Safari Search
#!desc=Safari 全能搜索 (必应版)
#!author=@lalifeier
# 使用声明：此脚本仅供学习与交流，请勿转载与贩卖！

[URL Rewrite]
# Safari 内输入 命令 + 空格 + 关键词 快速指定搜索引擎搜索
#  注：先进入设置更改 Safari 默认搜索为 必应

# 翻译
# yd  xxx (有道词典)
^https:\/\/cn.bing.com\/search\/\?q=yd\+([^&]+).+ http://dict.youdao.com/search?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+yd.+ http://dict.youdao.com/search?q=$1 302
# trc xxx (Google 译至中)
^https:\/\/cn.bing.com\/search\/\?q=trc\+([^&]+).+ https://translate.google.com/#view=home&op=translate&sl=auto&tl=zh-CN&text=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+trc.+ https://translate.google.com/#view=home&op=translate&sl=auto&tl=zh-CN&text=$1 302
# tre xxx (Google 译至英)
^https:\/\/cn.bing.com\/search\/\?q=tre\+([^&]+).+ https://translate.google.com/#view=home&op=translate&sl=auto&tl=en&text=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+tre.+ https://translate.google.com/#view=home&op=translate&sl=auto&tl=en&text=$1 302
# trj xxx (Google 译至日)
^https:\/\/cn.bing.com\/search\/\?q=trj\+([^&]+).+ https://translate.google.com/#view=home&op=translate&sl=auto&tl=ja&text=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+trj.+ https://translate.google.com/#view=home&op=translate&sl=auto&tl=ja&text=$1 302

# 社区
# tt    xxx (头条)
^https:\/\/cn.bing.com\/search\/\?q=tt\+([^&]+).+ https://so.toutiao.com/search?keyword=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+tt.+ https://so.toutiao.com/search?keyword=$1 302
# db    xxx (豆瓣)
^https:\/\/cn.bing.com\/search\/\?q=db\+([^&]+).+ https://m.douban.com/search?query=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+db.+ https://m.douban.com/search?query=$1 302
# zh    xxx (知乎)
^https:\/\/cn.bing.com\/search\/\?q=zh\+([^&]+).+ http://www.zhihu.com/search?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+zh.+ http://www.zhihu.com/search?q=$1 302
# wb    xxx (微博)
^https:\/\/cn.bing.com\/search\/\?q=wb\+([^&]+).+ https://s.weibo.com/weibo/$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+wb.+ https://s.weibo.com/weibo/$1 302
# wx    xxx (微信)
^https:\/\/cn.bing.com\/search\/\?q=wx\+([^&]+).+ https://weixin.sogou.com/weixinwap?query=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+wx.+ https://weixin.sogou.com/weixinwap?query=$1 302
# up xxx (Unsplash)
^https:\/\/cn.bing.com\/search\/\?q=up\+([^&]+).+ https://unsplash.com/s/photos/$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+up.+ https://unsplash.com/s/photos/$1 302
# sspai xxx (少数派站内搜索)
^https:\/\/cn.bing.com\/search\/\?q=sspai\+([^&]+).+ https://sspai.com/search/post/$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+sspai.+ https://sspai.com/search/post/$1 302
# ssp   xxx (Google 搜索少数派)
^https:\/\/cn.bing.com\/search\/\?q=ssp\+([^&]+).+ https://www.google.com/search?as_q=$1&as_sitesearch=sspai.com 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+ssp.+ https://www.google.com/search?as_q=$1&as_sitesearch=sspai.com 302
# tw    xxx (Twitter)
^https:\/\/cn.bing.com\/search\/\?q=tw\+([^&]+).+ https://twitter.com/search?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+tw.+ https://twitter.com/search?q=$1 302
# gh    xxx (GitHub)
^https:\/\/cn.bing.com\/search\/\?q=gh\+([^&]+).+ https://github.com/search?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+gh.+ https://github.com/search?q=$1 302
# so    xxx (Stack Overflow)
^https:\/\/cn.bing.com\/search\/\?q=so\+([^&]+).+ https://stackoverflow.com/search?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+so.+ https://stackoverflow.com/search?q=$1 302
# se    xxx (StackExchange)
^https:\/\/cn.bing.com\/search\/\?q=se\+([^&]+).+ https://stackexchange.com/search?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+se.+ https://stackexchange.com/search?q=$1 302
# wa    xxx (WolframAlpha)
^https:\/\/cn.bing.com\/search\/\?q=wa\+([^&]+).+ https://www.wolframalpha.com/input/?i=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+wa.+ https://www.wolframalpha.com/input/?i=$1 302
# rd    xxx (Reddit)
^https:\/\/cn.bing.com\/search\/\?q=rd\+([^&]+).+ https://www.reddit.com/search?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+rd.+ https://www.reddit.com/search?q=$1 302

# 购物
# zdm xxx (什么值得买)
^https:\/\/cn.bing.com\/search\/\?q=zdm\+([^&]+).+ https://search.m.smzdm.com/?v=b&s=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+zdm.+ https://search.m.smzdm.com/?v=b&s=$1 302
# jd  xxx (京东)
^https:\/\/cn.bing.com\/search\/\?q=jd\+([^&]+).+ https://so.m.jd.com/ware/search.action?keyword=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+jd.+ https://so.m.jd.com/ware/search.action?keyword=$1 302
# tb  xxx (淘宝)
^https:\/\/cn.bing.com\/search\/\?q=tb\+([^&]+).+ https://s.m.taobao.com/h5?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+tb.+ https://s.m.taobao.com/h5?q=$1 302

# 视频
# yt  xxx (YouTube)
^https:\/\/cn.bing.com\/search\/\?q=yt\+([^&]+).+ https://www.youtube.com/results?search_query=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+yt.+ https://www.youtube.com/results?search_query=$1 302
# bli xxx (哔哩哔哩)
^https:\/\/cn.bing.com\/search\/\?q=bli\+([^&]+).+ https://m.bilibili.com/search?keyword=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+bli.+ https://m.bilibili.com/search?keyword=$1 302
# gd  xxx (Google 搜索 Google Drive 资源)
^https:\/\/cn.bing.com\/search\/\?q=gd\+([^&]+).+ https://www.google.com/search?q=%22Google+Drive%22+$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+gd.+ https://www.google.com/search?q=%22Google+Drive%22+$1 302
# tgd xxx (t.me/gdurl 搜索 Google Drive 资源)
^https:\/\/cn.bing.com\/search\/\?q=tgd\+([^&]+).+ https://t.me/s/gdurl?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+tgd.+ https://t.me/s/gdurl?q=$1 302
# ph  xxx (PornHub)
^https:\/\/cn.bing.com\/search\/\?q=ph\+([^&]+).+ https://cn.pornhub.com/video/search?search=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+ph.+ https://cn.pornhub.com/video/search?search=$1 302
# af  xxx (Acfun)
^https:\/\/cn.bing.com\/search\/\?q=af\+([^&]+).+ https://www.acfun.cn/search?keyword=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+af.+ https://www.acfun.cn/search?keyword=$1 302
# ys  xxx (茶杯狐cupfox)
^https:\/\/cn.bing.com\/search\/\?q=ys\+([^&]+).+ https://cupfox.app/search?key=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+ys.+ https://cupfox.app/search?key=$1 302

# 苹果商店切换
# cn  (切换至中国区)
^https:\/\/cn.bing.com\/search\/\?q=cn&.+ https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143465&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=cn&urlDesc= 302
# hk  (切换至香港区)
^https:\/\/cn.bing.com\/search\/\?q=hk&.+ https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143463&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=hk&urlDesc= 302
# tw  (切换至台湾区)
^https:\/\/cn.bing.com\/search\/\?q=tw&.+ https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143470&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=tw&urlDesc= 302
# us  (切换至美国区)
^https:\/\/cn.bing.com\/search\/\?q=us&.+ https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143441&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=us&urlDesc= 302
# jp  (切换至日本区)
^https:\/\/cn.bing.com\/search\/\?q=jp&.+ https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143462&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=jp&urlDesc= 302
# kr  (切换至韩国区)
^https:\/\/cn.bing.com\/search\/\?q=kr&.+ https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143466&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=kr&urlDesc= 302
# tr  (切换至土耳其区)
^https:\/\/cn.bing.com\/search\/\?q=tr&.+ https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143480&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=tr&urlDesc= 302
# sg  (切换至新加坡区)
^https:\/\/cn.bing.com\/search\/\?q=sg&.+ https://itunes.apple.com/WebObjects/MZStore.woa/wa/resetAndRedirect?dsf=143464&mt=8&url=/WebObjects/MZStore.woa/wa/viewSoftware?mt=8&id=1108187390&cc=sg&urlDesc= 302

# 搜索
# tf xxx (google搜索Testflight)
^https:\/\/cn.bing.com\/search\/\?q=tf(\+|%20)([^&]+).+ https://www.google.com/search?as_q=$2&as_sitesearch=testflight.apple.com 302

# tgm xxx（TG喵频道搜索）
^https:\/\/cn.bing.com\/search\/\?q=tgm\+([^&]+).+ https://meow.tg/search/$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+tgm.+ https://meow.tg/search/$1 302

# dt xxx（下载中心）
^https:\/\/cn.bing.com\/search\/\?q=dt\+([^&]+).+ https://downloadcenter.delta-china.com.cn/DownloadCenter?v=1&q=$1&sort_expr=cdate&sort_dir=DESC 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+dt.+ https://downloadcenter.delta-china.com.cn/DownloadCenter?v=1&q=$1&sort_expr=cdate&sort_dir=DESC 302
# bd  xxx (百度搜索)
^https:\/\/cn.bing.com\/search\/\?q=bd\+([^&]+).+ https://www.baidu.com/s?wd=$1 302
^https:\/\/cn.bing.com\/search\/\?q=((.(?!bd))+)\+bd.+ https://www.baidu.com/s?wd=$1 302
# wk  xxx (维基搜索)
^https:\/\/cn.bing.com\/search\/\?q=wk\+([^&]+).+ https://zh.wikipedia.org/wiki/$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+wk.+ https://zh.wikipedia.org/wiki/$1 302
# wz  xxx (无追搜索)
^https:\/\/cn.bing.com\/search\/\?q=wz\+([^&]+).+ https://www.wuzhuiso.com/s?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+wz.+ https://www.wuzhuiso.com/s?q=$1 302
# yh  xxx (油猴搜索)
^https:\/\/cn.bing.com\/search\/\?q=yh\+([^&]+).+ https://greasyfork.org/zh-CN/scripts?q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+yh.+ https://greasyfork.org/zh-CN/scripts?q=$1 302
# gi  xxx (Google 图片)
^https:\/\/cn.bing.com\/search\/\?q=gi\+([^&]+).+ https://www.google.com/search?&tbm=isch&q=$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+gi.+ https://www.google.com/search?&tbm=isch&q=$1 302
# ios  xxx (苹果应用搜索)
^https:\/\/cn.bing.com\/search\/\?q=ios\+([^&]+).+ https://www.qimai.cn/search/index/search/$1 302
^https:\/\/cn.bing.com\/search\/\?q=([^+]+)\+ios.+ https://www.qimai.cn/search/index/search/$1 302
#     xxx （无指令默认为 Google）
^https:\/\/cn.bing.com\/search\/\?q=([^&]+).+ https://www.google.com/search?q=$1 302

[MITM]
hostname = %APPEND% cn.bing.com
